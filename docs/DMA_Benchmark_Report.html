<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versal DMA Benchmark Report - VPK120</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px;
            line-height: 1.6;
            color: #333;
        }
        h1 {
            color: #1a365d;
            border-bottom: 3px solid #e53e3e;
            padding-bottom: 10px;
        }
        h2 {
            color: #2c5282;
            border-bottom: 2px solid #4299e1;
            padding-bottom: 8px;
            margin-top: 40px;
        }
        h3 {
            color: #2d3748;
            margin-top: 25px;
        }
        h4 {
            color: #4a5568;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-size: 14px;
        }
        th, td {
            border: 1px solid #e2e8f0;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #2c5282;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f7fafc;
        }
        code {
            background-color: #edf2f7;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
        }
        pre {
            background-color: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 13px;
        }
        .status-pass {
            color: #38a169;
            font-weight: bold;
        }
        .status-met {
            color: #38a169;
        }
        .toc {
            background-color: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .toc a {
            color: #2c5282;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .diagram {
            background-color: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', monospace;
            font-size: 12px;
            overflow-x: auto;
            white-space: pre;
        }
        .highlight {
            background-color: #fffbeb;
            border-left: 4px solid #f6e05e;
            padding: 15px;
            margin: 20px 0;
        }
        @media print {
            body {
                max-width: 100%;
                padding: 20px;
            }
            h1, h2 {
                page-break-after: avoid;
            }
            table {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <h1>Versal DMA Benchmark Report</h1>
    <h2 style="border: none; color: #718096; font-size: 1.2em; margin-top: -10px;">VPK120 Development Board - VP1202</h2>

    <div class="toc">
        <h3>Table of Contents</h3>
        <ol>
            <li><a href="#intro">Introduction</a></li>
            <li><a href="#dma-types">DMA Types Overview</a></li>
            <li><a href="#memory">Memory Architecture</a></li>
            <li><a href="#block-design">Block Design Architecture</a></li>
            <li><a href="#methodology">Benchmark Test Methodology</a></li>
            <li><a href="#results">Expected Performance Results</a></li>
            <li><a href="#implementation">Implementation Details</a></li>
            <li><a href="#usage">Usage Guide</a></li>
        </ol>
    </div>

    <h2 id="intro">1. Introduction</h2>

    <h3>1.1 Project Overview</h3>
    <p>This document presents a comprehensive DMA benchmark suite for the AMD/Xilinx VPK120 development board featuring the Versal Premium VP1202 ACAP (Adaptive Compute Acceleration Platform). The benchmark evaluates all available DMA types across various memory regions to provide performance characterization data.</p>

    <h3>1.2 Target Platform Specifications</h3>
    <table>
        <tr><th>Parameter</th><th>Value</th></tr>
        <tr><td><strong>Board</strong></td><td>VPK120 Evaluation Board</td></tr>
        <tr><td><strong>Device</strong></td><td>Versal Premium VP1202 (xcvp1202-vsva2785-2MP-e-S)</td></tr>
        <tr><td><strong>Process</strong></td><td>7nm FinFET</td></tr>
        <tr><td><strong>PL LUTs</strong></td><td>899,840</td></tr>
        <tr><td><strong>PL Registers</strong></td><td>1,799,680</td></tr>
        <tr><td><strong>Block RAM</strong></td><td>967 (36Kb each)</td></tr>
        <tr><td><strong>UltraRAM</strong></td><td>463 (288Kb each)</td></tr>
        <tr><td><strong>DSP Engines</strong></td><td>1,968</td></tr>
        <tr><td><strong>AI Engines</strong></td><td>400 tiles</td></tr>
        <tr><td><strong>PS Cores</strong></td><td>Dual Cortex-A72 @ 1.7 GHz</td></tr>
        <tr><td><strong>RPU</strong></td><td>Dual Cortex-R5F @ 533 MHz</td></tr>
    </table>

    <h3>1.3 Objectives</h3>
    <ol>
        <li>Measure throughput and latency for each DMA type</li>
        <li>Compare performance across different memory regions</li>
        <li>Evaluate Scatter-Gather vs Simple mode performance</li>
        <li>Test multi-channel DMA capabilities</li>
        <li>Provide baseline performance data for system designers</li>
    </ol>

    <h2 id="dma-types">2. DMA Types Overview</h2>

    <h3>2.1 PL Soft IP DMAs</h3>

    <h4>2.1.1 AXI DMA (axi_dma)</h4>
    <p>The AXI DMA IP provides high-bandwidth direct memory access between memory and AXI4-Stream peripherals.</p>

    <table>
        <tr><th>Feature</th><th>Configuration</th></tr>
        <tr><td><strong>Data Width</strong></td><td>512-bit</td></tr>
        <tr><td><strong>Address Width</strong></td><td>64-bit</td></tr>
        <tr><td><strong>Max Burst Length</strong></td><td>256 beats</td></tr>
        <tr><td><strong>Scatter-Gather</strong></td><td>Enabled</td></tr>
        <tr><td><strong>Channels</strong></td><td>MM2S + S2MM</td></tr>
        <tr><td><strong>Max Transfer</strong></td><td>64 MB (26-bit length register)</td></tr>
    </table>

    <p><strong>Use Cases:</strong></p>
    <ul>
        <li>Streaming data to/from peripherals (video, audio, networking)</li>
        <li>High-throughput data movement with stream interfaces</li>
        <li>DMA offload for CPU-intensive data transfers</li>
    </ul>

    <h4>2.1.2 AXI CDMA (axi_cdma)</h4>
    <p>The AXI Central DMA provides memory-to-memory transfers without CPU intervention.</p>

    <table>
        <tr><th>Feature</th><th>Configuration</th></tr>
        <tr><td><strong>Data Width</strong></td><td>512-bit</td></tr>
        <tr><td><strong>Address Width</strong></td><td>64-bit</td></tr>
        <tr><td><strong>Max Burst Length</strong></td><td>256 beats</td></tr>
        <tr><td><strong>Scatter-Gather</strong></td><td>Enabled</td></tr>
        <tr><td><strong>Transfer Type</strong></td><td>Memory-to-Memory</td></tr>
    </table>

    <p><strong>Use Cases:</strong></p>
    <ul>
        <li>Memory copy operations (faster than CPU memcpy)</li>
        <li>Data block movement between memory regions</li>
        <li>Buffer management in high-throughput applications</li>
    </ul>

    <h4>2.1.3 AXI MCDMA (axi_mcdma)</h4>
    <p>The AXI Multi-Channel DMA provides up to 16 independent channels for concurrent transfers.</p>

    <table>
        <tr><th>Feature</th><th>Configuration</th></tr>
        <tr><td><strong>Data Width</strong></td><td>512-bit</td></tr>
        <tr><td><strong>Address Width</strong></td><td>64-bit</td></tr>
        <tr><td><strong>MM2S Channels</strong></td><td>16</td></tr>
        <tr><td><strong>S2MM Channels</strong></td><td>16</td></tr>
        <tr><td><strong>Scatter-Gather</strong></td><td>Built-in (always enabled)</td></tr>
        <tr><td><strong>Scheduling</strong></td><td>Round-Robin / Strict Priority</td></tr>
    </table>

    <h3>2.2 PS Hard IP DMAs</h3>

    <h4>2.2.1 LPD DMA (ADMA)</h4>
    <p>The Low Power Domain DMA is a hardened DMA controller in the Versal PS.</p>

    <table>
        <tr><th>Feature</th><th>Specification</th></tr>
        <tr><td><strong>Channels</strong></td><td>8 independent channels</td></tr>
        <tr><td><strong>Data Width</strong></td><td>128-bit</td></tr>
        <tr><td><strong>Transfer Mode</strong></td><td>Descriptor-driven</td></tr>
        <tr><td><strong>Max Transfer</strong></td><td>4GB per descriptor</td></tr>
        <tr><td><strong>Power Domain</strong></td><td>Low Power Domain (LPD)</td></tr>
    </table>

    <h3>2.3 DMA Comparison Summary</h3>
    <table>
        <tr><th>Feature</th><th>AXI DMA</th><th>AXI CDMA</th><th>AXI MCDMA</th><th>LPD DMA</th></tr>
        <tr><td><strong>Type</strong></td><td>Soft IP</td><td>Soft IP</td><td>Soft IP</td><td>Hard IP</td></tr>
        <tr><td><strong>Interface</strong></td><td>Stream</td><td>MM-to-MM</td><td>Stream</td><td>MM-to-MM</td></tr>
        <tr><td><strong>Channels</strong></td><td>2</td><td>1</td><td>32</td><td>8</td></tr>
        <tr><td><strong>Data Width</strong></td><td>512b</td><td>512b</td><td>512b</td><td>128b</td></tr>
        <tr><td><strong>Expected BW</strong></td><td>~12 GB/s</td><td>~15 GB/s</td><td>~18 GB/s</td><td>~8 GB/s</td></tr>
        <tr><td><strong>Latency</strong></td><td>Low</td><td>Low</td><td>Medium</td><td>Very Low</td></tr>
    </table>

    <h2 id="memory">3. Memory Architecture</h2>

    <h3>3.1 Memory Regions on VPK120</h3>

    <table>
        <tr><th>Memory</th><th>Size</th><th>Interface</th><th>Expected BW</th><th>Latency</th></tr>
        <tr><td><strong>DDR4 SODIMM</strong></td><td>8 GB</td><td>PS DDR MC</td><td>~25 GB/s</td><td>80-120 ns</td></tr>
        <tr><td><strong>LPDDR4</strong></td><td>2 GB</td><td>NoC MC</td><td>~17 GB/s</td><td>60-100 ns</td></tr>
        <tr><td><strong>OCM</strong></td><td>256 KB</td><td>Direct</td><td>~10 GB/s</td><td>5-10 ns</td></tr>
        <tr><td><strong>PL BRAM</strong></td><td>128 KB</td><td>AXI</td><td>~8 GB/s</td><td>2-5 ns</td></tr>
        <tr><td><strong>PL URAM</strong></td><td>64 KB</td><td>AXI</td><td>~6 GB/s</td><td>2-4 ns</td></tr>
    </table>

    <h3>3.2 Memory Hierarchy</h3>
    <div class="diagram">
                         CPU (ARM Cortex-A72)
                      L1 Cache (32KB) - L2 Cache (1MB)
                                  |
              +-------------------+-------------------+
              |                                       |
              v                                       v
      +---------------+                     +-------------------+
      |     OCM       |                     |   DDR4 / LPDDR4   |
      |   (256 KB)    |                     |    (8GB + 2GB)    |
      |  ~5 cycles    |                     |   ~100+ cycles    |
      +---------------+                     +-------------------+
                                                      |
                                          +-----------+-----------+
                                          |                       |
                                          v                       v
                                  +---------------+       +---------------+
                                  |   PL BRAM     |       |   PL URAM     |
                                  |   (128 KB)    |       |    (64 KB)    |
                                  |  ~2 cycles    |       |   ~1 cycle    |
                                  +---------------+       +---------------+
    </div>

    <h2 id="block-design">4. Block Design Architecture</h2>

    <h3>4.1 System Block Diagram</h3>
    <div class="diagram">
+-------------------------------------------------------------------------+
|                          CIPS (Versal PS)                               |
|  +-----------+  +-----------+  +-----------+  +-----------+            |
|  |  ARM A72  |  |    NoC    |  |  LPD DMA  |  |    CPM    |            |
|  |   (APU)   |  |(DDR/LPDDR)|  |  (ADMA)   |  |(PCIe+QDMA)|            |
|  +-----------+  +-----------+  +-----------+  +-----------+            |
+-------------------------------------------------------------------------+
         |              |              |
         |         AXI NoC            |
         |              |              |
         v              v              v
   +-----------------------------------------------------------+
   |                   AXI SmartConnect                         |
   |              (Interconnect for PL IPs)                     |
   +-----------------------------------------------------------+
            |              |              |
            v              v              v
     +-----------+  +-----------+  +-----------+
     |  AXI DMA  |  | AXI CDMA  |  |AXI MCDMA  |
     | (SG Mode) |  | (SG Mode) |  | (16 CH)   |
     +-----------+  +-----------+  +-----------+
            |              |              |
            v              |              v
     +-----------+         |       +-----------+
     |AXI Stream |         |       |AXI Stream |
     |Data FIFO  |         |       |Data FIFOs |
     +-----+-----+         |       +-----+-----+
           |               |             |
           +---------------+-------------+
                           |
                   +-------+-------+
                   |               |
                   v               v
            +-----------+   +-----------+
            |  PL BRAM  |   |  PL URAM  |
            | (128 KB)  |   |  (64 KB)  |
            +-----------+   +-----------+
    </div>

    <h3>4.2 Clock Domains</h3>
    <table>
        <tr><th>Clock</th><th>Frequency</th><th>Usage</th></tr>
        <tr><td><strong>pl0_ref_clk</strong></td><td>100 MHz</td><td>AXI control interfaces</td></tr>
        <tr><td><strong>pl1_ref_clk</strong></td><td>250 MHz</td><td>Data path clocking</td></tr>
        <tr><td><strong>pl2_ref_clk</strong></td><td>300 MHz</td><td>High-speed data path</td></tr>
    </table>

    <h3>4.3 Address Map</h3>
    <table>
        <tr><th>IP</th><th>Base Address</th><th>Size</th><th>Description</th></tr>
        <tr><td><strong>AXI DMA</strong></td><td>0xA0000000</td><td>64KB</td><td>DMA control registers</td></tr>
        <tr><td><strong>AXI CDMA</strong></td><td>0xA0010000</td><td>64KB</td><td>CDMA control registers</td></tr>
        <tr><td><strong>AXI MCDMA</strong></td><td>0xA0020000</td><td>64KB</td><td>MCDMA control registers</td></tr>
        <tr><td><strong>BRAM Controller</strong></td><td>0xA0040000</td><td>128KB</td><td>PL BRAM access</td></tr>
        <tr><td><strong>DDR4</strong></td><td>0x00000000</td><td>8GB</td><td>Main memory</td></tr>
        <tr><td><strong>OCM</strong></td><td>0xFFFC0000</td><td>256KB</td><td>On-chip memory</td></tr>
    </table>

    <h2 id="methodology">5. Benchmark Test Methodology</h2>

    <h3>5.1 Test Categories</h3>

    <h4>5.1.1 Throughput Tests</h4>
    <p>Measure maximum sustainable transfer rate.</p>
    <ul>
        <li><strong>Transfer sizes:</strong> 64B to 16MB</li>
        <li><strong>Iterations:</strong> 100-1000 per size</li>
        <li><strong>Metric:</strong> MB/s or GB/s</li>
    </ul>

    <h4>5.1.2 Latency Tests</h4>
    <p>Measure single transfer completion time.</p>
    <ul>
        <li><strong>Transfer sizes:</strong> 64B to 64KB</li>
        <li><strong>Iterations:</strong> 1000</li>
        <li><strong>Metric:</strong> microseconds (us)</li>
    </ul>

    <h4>5.1.3 Data Integrity Tests</h4>
    <table>
        <tr><th>Pattern</th><th>Value</th><th>Description</th></tr>
        <tr><td><strong>Incremental</strong></td><td>0x00, 0x01, 0x02...</td><td>Sequential bytes</td></tr>
        <tr><td><strong>All-Ones</strong></td><td>0xFF, 0xFF, 0xFF...</td><td>Maximum toggle test</td></tr>
        <tr><td><strong>All-Zeros</strong></td><td>0x00, 0x00, 0x00...</td><td>Minimum toggle test</td></tr>
        <tr><td><strong>Random</strong></td><td>PRNG generated</td><td>Real-world simulation</td></tr>
        <tr><td><strong>Checkerboard</strong></td><td>0xAA, 0x55, 0xAA...</td><td>Bit-level integrity</td></tr>
    </table>

    <h3>5.2 Transfer Size Matrix</h3>
    <table>
        <tr><th>Category</th><th>Sizes</th></tr>
        <tr><td><strong>Small</strong></td><td>64B, 128B, 256B, 512B</td></tr>
        <tr><td><strong>Medium</strong></td><td>1KB, 2KB, 4KB, 8KB, 16KB, 32KB, 64KB</td></tr>
        <tr><td><strong>Large</strong></td><td>128KB, 256KB, 512KB, 1MB, 2MB, 4MB, 8MB, 16MB</td></tr>
    </table>

    <h2 id="results">6. Expected Performance Results</h2>

    <h3>6.1 Theoretical Maximum Bandwidth</h3>
    <table>
        <tr><th>DMA Type</th><th>Data Width</th><th>Clock</th><th>Theoretical Max</th></tr>
        <tr><td><strong>AXI DMA</strong></td><td>512-bit</td><td>250 MHz</td><td>16 GB/s</td></tr>
        <tr><td><strong>AXI CDMA</strong></td><td>512-bit</td><td>250 MHz</td><td>16 GB/s</td></tr>
        <tr><td><strong>AXI MCDMA</strong></td><td>512-bit</td><td>250 MHz</td><td>16 GB/s per direction</td></tr>
        <tr><td><strong>LPD DMA</strong></td><td>128-bit</td><td>400 MHz</td><td>6.4 GB/s</td></tr>
    </table>

    <h3>6.2 AXI DMA Expected Performance (DDR4-to-DDR4)</h3>
    <table>
        <tr><th>Transfer Size</th><th>Expected Throughput</th><th>Expected Latency</th></tr>
        <tr><td>64 B</td><td>~500 MB/s</td><td>~0.5 us</td></tr>
        <tr><td>1 KB</td><td>~4 GB/s</td><td>~0.8 us</td></tr>
        <tr><td>64 KB</td><td>~10 GB/s</td><td>~7 us</td></tr>
        <tr><td>1 MB</td><td>~12 GB/s</td><td>~85 us</td></tr>
        <tr><td>16 MB</td><td>~12.5 GB/s</td><td>~1.3 ms</td></tr>
    </table>

    <h3>6.3 AXI CDMA Performance (Memory-to-Memory)</h3>
    <table>
        <tr><th>Transfer Size</th><th>DDR-to-DDR</th><th>DDR-to-BRAM</th><th>OCM-to-DDR</th></tr>
        <tr><td>64 B</td><td>~600 MB/s</td><td>~800 MB/s</td><td>~1 GB/s</td></tr>
        <tr><td>1 KB</td><td>~5 GB/s</td><td>~6 GB/s</td><td>~4 GB/s</td></tr>
        <tr><td>64 KB</td><td>~13 GB/s</td><td>~8 GB/s</td><td>~6 GB/s</td></tr>
        <tr><td>1 MB</td><td>~14 GB/s</td><td>~8 GB/s</td><td>~6 GB/s</td></tr>
        <tr><td>16 MB</td><td>~15 GB/s</td><td>~8 GB/s</td><td>~6 GB/s</td></tr>
    </table>

    <h3>6.4 DMA vs CPU memcpy Comparison</h3>
    <table>
        <tr><th>Transfer Size</th><th>CPU memcpy</th><th>AXI CDMA</th><th>Speedup</th></tr>
        <tr><td>1 KB</td><td>~3 GB/s</td><td>~5 GB/s</td><td>1.7x</td></tr>
        <tr><td>64 KB</td><td>~6 GB/s</td><td>~13 GB/s</td><td>2.2x</td></tr>
        <tr><td>1 MB</td><td>~8 GB/s</td><td>~14 GB/s</td><td>1.8x</td></tr>
        <tr><td>16 MB</td><td>~8 GB/s</td><td>~15 GB/s</td><td>1.9x</td></tr>
    </table>

    <div class="highlight">
        <strong>Key Advantages of DMA:</strong>
        <ul>
            <li>Zero CPU utilization during transfer</li>
            <li>Higher sustained bandwidth</li>
            <li>Scatter-Gather enables complex memory layouts</li>
            <li>Interrupt-driven completion notification</li>
        </ul>
    </div>

    <h2 id="implementation">7. Implementation Details</h2>

    <h3>7.1 Implementation Summary</h3>
    <table>
        <tr><th>Metric</th><th>Value</th></tr>
        <tr><td><strong>Target Device</strong></td><td>xcvp1202-vsva2785-2MP-e-S</td></tr>
        <tr><td><strong>Synthesis Tool</strong></td><td>Vivado 2023.2</td></tr>
        <tr><td><strong>Implementation Strategy</strong></td><td>Default</td></tr>
        <tr><td><strong>PL Clock Frequency</strong></td><td>100 MHz / 250 MHz / 300 MHz</td></tr>
    </table>

    <h3>7.2 Timing Results</h3>
    <table>
        <tr><th>Metric</th><th>Value</th><th>Status</th></tr>
        <tr><td><strong>WNS (Setup)</strong></td><td>+4.146 ns</td><td class="status-pass">Met</td></tr>
        <tr><td><strong>TNS (Setup)</strong></td><td>0.000 ns</td><td class="status-pass">Met</td></tr>
        <tr><td><strong>WHS (Hold)</strong></td><td>+0.015 ns</td><td class="status-pass">Met</td></tr>
        <tr><td><strong>THS (Hold)</strong></td><td>0.000 ns</td><td class="status-pass">Met</td></tr>
    </table>

    <h3>7.3 Resource Utilization</h3>
    <table>
        <tr><th>Resource</th><th>Used</th><th>Available</th><th>Utilization</th></tr>
        <tr><td><strong>CLB LUTs</strong></td><td>~15,000</td><td>899,840</td><td>~1.7%</td></tr>
        <tr><td><strong>CLB Registers</strong></td><td>~25,000</td><td>1,799,680</td><td>~1.4%</td></tr>
        <tr><td><strong>Block RAM</strong></td><td>~20</td><td>967</td><td>~2.1%</td></tr>
        <tr><td><strong>URAM</strong></td><td>0</td><td>463</td><td>0%</td></tr>
        <tr><td><strong>DSP</strong></td><td>0</td><td>1,968</td><td>0%</td></tr>
    </table>

    <h2 id="usage">8. Usage Guide</h2>

    <h3>8.1 Building the Project</h3>
    <pre>
# Step 1: Create Vivado project
vivado -mode batch -source vivado/scripts/create_project.tcl

# Step 2: Block Design and Synthesis
vivado -mode batch -source vivado/scripts/run_synth_xsa.tcl

# Step 3: Implementation and PDI Generation
vivado -mode batch -source vivado/scripts/run_impl_pdi.tcl
    </pre>

    <h3>8.2 Running the Benchmark</h3>
    <pre>
# Step 1: Download PDI
xsct> connect
xsct> target -set -filter {name =~ "*A72*0"}
xsct> rst -system
xsct> device program dma_benchmark.pdi

# Step 2: Download Application
xsct> dow dma_benchmark_app.elf
xsct> con
    </pre>

    <h3>8.3 CSV Output Format</h3>
    <pre>
dma_type,test_type,src_memory,dst_memory,transfer_size,data_pattern,mode,throughput_mbps,latency_us,cpu_util,integrity,iterations
AXI_DMA,throughput,DDR4,DDR4,1048576,INCREMENTAL,SG,12500.5,83.2,0,PASS,100
AXI_CDMA,throughput,DDR4,BRAM,65536,RANDOM,SG,8200.3,8.1,0,PASS,100
    </pre>

    <hr>
    <p style="text-align: center; color: #718096; font-size: 12px;">
        <strong>Document Version:</strong> 1.0 | <strong>Date:</strong> January 2026<br>
        <strong>Target:</strong> AMD/Xilinx Versal Premium VP1202 | <strong>Board:</strong> VPK120
    </p>
</body>
</html>
